(this.webpackJsonpcitizen_accra=this.webpackJsonpcitizen_accra||[]).push([[0],{42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},77:function(e,t,c){"use strict";c.r(t);var n={};c.r(n),c.d(n,"API_LINK",(function(){return I}));var r=c(1),a=c(0),i=c.n(a),s=c(22),o=c.n(s),l=(c(42),c(43),c(3)),j=c(4),d=c(9),u=c.p+"static/media/kwame-2781373_960_720.1c321691.jpg",b=Object(a.createContext)(null),h=c(16),O=c(17),x=c(18),g=c(20),f=c(19),v=Object(a.createContext)(),p=function(e){Object(g.a)(c,e);var t=Object(f.a)(c);function c(){var e;Object(O.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isLightTheme:!0,light:{syntax:"#555",ui:"#ddd",bg:"#eee"},dark:{syntax:"#ddd",ui:"#333",bg:"#555"}},e.toggleTheme=function(){e.setState({isLightTheme:!e.state.isLightTheme})},e}return Object(x.a)(c,[{key:"render",value:function(){return Object(r.jsx)(v.Provider,{value:Object(h.a)(Object(h.a)({},this.state),{},{toggleTheme:this.toggleTheme}),children:this.props.children})}}]),c}(a.Component),m=Object(a.createContext)(),S=function(e){Object(g.a)(c,e);var t=Object(f.a)(c);function c(){var e;Object(O.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={username:""},e.displayUserName=function(t){e.setState({username:t})},e}return Object(x.a)(c,[{key:"render",value:function(){return Object(r.jsx)(m.Provider,{value:Object(h.a)(Object(h.a)({},this.state),{},{displayUserName:this.displayUserName}),children:this.props.children})}}]),c}(a.Component),C=(c(44),c(15)),y=c.n(C),w=c(21),I=(c(65),"http://localhost"===window.location.href.substring(0,16)?"http://localhost:4000":"https://guarded-taiga-77263.herokuapp.com");function L(){var e,t=Object(a.useContext)(b),c=Object(l.a)(t,2),i=(c[0],c[1]);e=localStorage.getItem("user");i(localStorage.getItem("userID"));var s=Object(a.useState)(""),o=Object(l.a)(s,2),d=o[0],u=o[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),x=O[0],g=O[1],f=Object(a.useState)("mario"),v=Object(l.a)(f,2),p=v[0];v[1],Object(j.f)();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{}),e?Object(r.jsxs)("div",{className:"create",children:[Object(r.jsx)("h2",{children:"Share your nomination"}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=localStorage.getItem("userID");y()({method:"POST",data:{title:d,body:x,author:p,writerid:t},withCredentials:!0,url:"".concat(n.API_LINK,"/newrequest")}).then((function(e){return console.log(e)}))},children:[Object(r.jsx)("label",{children:"Entry Title:"}),Object(r.jsx)("input",{type:"text",required:!0,value:d,onChange:function(e){return u(e.target.value)}}),Object(r.jsx)("label",{children:"Entry Text:"}),Object(r.jsx)("textarea",{required:!0,value:x,onChange:function(e){return g(e.target.value)}}),Object(r.jsx)("button",{children:"Add Entry"})]})]}):Object(r.jsx)("h1",{children:"You are not loggedin "})]})}var T=function(){var e=Object(j.f)(),t=Object(a.useContext)(m).displayUserName,c=Object(a.useContext)(b),i=Object(l.a)(c,2),s=(i[0],i[1]),o=Object(a.useState)(""),d=Object(l.a)(o,2),u=d[0],h=d[1],O=Object(a.useState)(""),x=Object(l.a)(O,2),g=x[0],f=x[1],v=Object(a.useState)(""),p=Object(l.a)(v,2),S=p[0],C=p[1],I=Object(a.useState)(""),L=Object(l.a)(I,2),T=L[0],P=L[1],N=Object(a.useState)(""),k=Object(l.a)(N,2),_=k[0],E=k[1],A=Object(a.useState)(""),q=Object(l.a)(A,2),K=q[0],D=q[1],R=Object(a.useState)(""),U=Object(l.a)(R,2),B=U[0],F=U[1],W=Object(a.useState)(null),Y=Object(l.a)(W,2),z=Y[0],G=Y[1],J=Object(a.useState)(null),H=Object(l.a)(J,2),M=H[0],Q=H[1],V=Object(a.useState)("loginTab"),X=Object(l.a)(V,2),Z=X[0],$=X[1],ee=function(e){$(e),console.log(e)};return Object(r.jsx)("div",{className:"login-page",children:Object(r.jsxs)(w.d,{id:"tabId",value:Z,onChange:function(e){return ee(e)},children:[Object(r.jsxs)(w.b,{children:[Object(r.jsx)(w.a,{label:"Login",value:"loginTab",children:"Login"}),Object(r.jsx)(w.a,{label:"Register",value:"registerTab",children:"Register"})]}),Object(r.jsxs)(w.c,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)("input",{placeholder:"username",onChange:function(e){return E(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return D(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:function(){y()({method:"POST",data:{username:_,password:K},withCredentials:!0,url:"".concat(n.API_LINK,"/login")}).then((function(e){G(e.data),Q(e.data._id),console.log("userid"+e.data._id),"undefined"!==e.data._id&&window.localStorage.setItem("userID",e.data._id),t(e.data.username)}))},children:" Submit"}),M?Object(r.jsxs)("h1",{children:[" userid ",z._id," "]}):null]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Get User"}),Object(r.jsx)("button",{onClick:function(){y()({method:"GET",withCredentials:!0,url:"".concat(n.API_LINK,"/user")}).then((function(e){G(e.data),console.log(e.data),console.log(e.data)}))},children:"Submit"}),M?Object(r.jsxs)("h1",{children:["Welcome Back ",z.username," userid ",z._id]}):null]}),M?window.localStorage.setItem("user",!0):window.localStorage.setItem("user",!1),!!M&&s("true"),M?e.push("/Requestf"):Object(r.jsx)("h1",{children:" You are not yet Loggedin "})]}),Object(r.jsx)(w.c,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Register"}),Object(r.jsx)("h3",{children:B?Object(r.jsx)("h3",{children:"You are registered "}):Object(r.jsx)("h1",{children:"You could not be registered"})}),Object(r.jsx)("input",{value:u,placeholder:"name",onChange:function(e){return h(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{value:g,placeholder:"username",onChange:function(e){return f(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{value:S,type:"password",placeholder:"password",onChange:function(e){return C(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{value:T,type:"password",placeholder:"password confirmation",onChange:function(e){return P(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{onClick:function(){if(S!==T)return alert("Passwords don't match");y()({method:"POST",data:{name:u,username:g,password:S},withCredentials:!0,url:"".concat(n.API_LINK,"/register")}).then((function(e){h(""),f(""),C(""),ee("registerTab"),console.log(e),"User Created"===e.data?F(!0):F(!1)}))},children:"Submit"})]})})]})})},P=c(35),N=c.n(P),k=function(e){Object(g.a)(c,e);var t=Object(f.a)(c);function c(){return Object(O.a)(this,c),t.apply(this,arguments)}return Object(x.a)(c,[{key:"render",value:function(){var e=this.context.toggleTheme;return Object(r.jsx)(N.a,{onClick:e,color:"#d8d8d8"})}}]),c}(a.Component);k.contextType=v;var _=k,E=function(){var e=Object(a.useContext)(b),t=Object(l.a)(e,2),c=(t[0],t[1]),n=(Object(a.useContext)(m).username,Object(j.f)());return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsxs)("h1",{children:[Object(r.jsx)("span",{style:{color:"red"},children:"Citi"}),Object(r.jsx)("span",{style:{color:"gold"},children:"zen A"}),Object(r.jsx)("span",{style:{color:"green"},children:"ccra"})]})}),Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsx)("img",{src:u,height:"90",width:"90"}),Object(r.jsxs)("div",{className:"links",children:[Object(r.jsx)(d.b,{to:"/",style:{color:"white",backgroundColor:"#7f00ff",borderRadius:"8px"},children:"Home"}),localStorage.getItem("user")?Object(r.jsx)(d.b,{"data-testid":"requestf",to:"/Requestf",style:{color:"white",backgroundColor:"#7f00ff",borderRadius:"8px"},children:"New Submission"}):"",Object(r.jsx)("button",{style:{color:"white",backgroundColor:"#7f00ff",borderRadius:"8px",padding:6,margin:12},onClick:function(){console.log(localStorage.getItem("user")),null===localStorage.getItem("user")?n.push("/login"):(localStorage.clear(),c(!1))},children:localStorage.getItem("user")?Object(r.jsx)("p",{style:{color:"white"},children:"Log out"}):Object(r.jsx)("p",{style:{color:"white"},children:"Login"})})]}),Object(r.jsx)(_,{})]})]})},A=function(e){var t=e.blogs,c=Object(a.useContext)(v),n=c.isLightTheme,i=c.light,s=c.dark,o=n?i:s;return Object(r.jsx)("div",{className:"blog-list",style:{color:o.syntax,background:o.bg},children:t.map((function(e){return Object(r.jsx)("div",{className:"blog-preview",children:Object(r.jsxs)(d.b,{to:"/fetchsinglerequest/".concat(e._id),children:[Object(r.jsx)("h2",{children:e.title}),Object(r.jsxs)("p",{children:["Written by ",e.users[0].name]})]})},e._id)}))})},q=function(e){var t=Object(a.useState)(null),c=Object(l.a)(t,2),n=c[0],r=c[1],i=Object(a.useState)(!0),s=Object(l.a)(i,2),o=s[0],j=s[1],d=Object(a.useState)(null),u=Object(l.a)(d,2),b=u[0],h=u[1];return Object(a.useEffect)((function(){var t=new AbortController;return setTimeout((function(){fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("could not fetch the data for that resource");return e.json()})).then((function(e){j(!1),r(e),h(null)})).catch((function(e){"AbortError"===e.name?console.log("fetch aborted"):(j(!1),h(e.message))}))}),1e3),function(){return t.abort()}}),[e]),{data:n,isPending:o,error:b}},K=function(){var e=q("".concat(n.API_LINK,"/fetchrequests")),t=e.error,c=e.isPending,a=e.data;return console.log(a),Object(r.jsxs)("div",{className:"home",children:[t&&Object(r.jsx)("div",{children:t}),c&&Object(r.jsx)("div",{children:"Loading..."}),a&&Object(r.jsx)(A,{blogs:a}),Object(r.jsx)("div",{})]})},D=Object(a.createContext)(),R=function(e){Object(g.a)(c,e);var t=Object(f.a)(c);function c(){var e;Object(O.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={title:"",body:"",author:"",writerid:""},e.holdforEdit=function(t,c,n,r){e.setState({title:t,body:c,author:n,writerid:r})},e}return Object(x.a)(c,[{key:"render",value:function(){return Object(r.jsx)(D.Provider,{value:Object(h.a)(Object(h.a)({},this.state),{},{holdforEdit:this.holdforEdit}),children:this.props.children})}}]),c}(a.Component),U=function(){var e=Object(a.useContext)(D),t=e.title,c=e.body,i=e.author,s=e.writerid;console.log(t,c,i,s);var o=Object(j.g)().id,d=q("".concat(n.API_LINK,"/fetchsinglerequest/")+o),u=d.data,b=d.error,h=d.isPending,O=Object(a.useState)(t),x=Object(l.a)(O,2),g=x[0],f=x[1],v=Object(a.useState)(c),p=Object(l.a)(v,2),m=p[0],S=p[1],C=Object(a.useState)(i),y=Object(l.a)(C,2),w=y[0],I=(y[1],Object(a.useState)(s)),L=Object(l.a)(I,2),T=L[0],P=(L[1],Object(j.f)());localStorage.getItem("userID");return Object(r.jsxs)("div",{className:"blog-details",children:[h&&Object(r.jsx)("div",{children:"Loading..."}),b&&Object(r.jsx)("div",{children:b}),t&&Object(r.jsxs)("article",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{placeholder:"Title",value:g,onChange:function(e){return f(e.target.value)}})}),Object(r.jsxs)("p",{children:["Written by ",w]}),Object(r.jsxs)("div",{children:[" ",Object(r.jsx)("input",{placeholder:"Title",value:m,onChange:function(e){return S(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:T})}),Object(r.jsx)("div",{children:Object(r.jsx)("input",{value:w})}),Object(r.jsx)("button",{onClick:function(){fetch("".concat(n.API_LINK,"/fetchsinglerequest/")+u.id,{method:"DELETE"}).then((function(){P.push("/")}))},children:"Edit"}),Object(r.jsx)("button",{onClick:function(){fetch("".concat(n.API_LINK,"/fetchsinglerequest/")+u.id,{method:"DELETE"}).then((function(){P.push("/")}))},children:"delete"})]})]})},B=function(){var e=Object(j.g)().id,t=q("".concat(n.API_LINK,"/fetchsinglerequest/")+e),c=t.data,i=t.error,s=t.isPending;console.log(c);var o=Object(j.f)(),d=localStorage.getItem("userID"),u=(Object(a.useContext)(D).holdforEdit,Object(a.useState)("")),b=Object(l.a)(u,2),h=b[0],O=b[1],x=Object(a.useState)(""),g=Object(l.a)(x,2),f=g[0],v=g[1],p=Object(a.useState)(""),m=Object(l.a)(p,2),S=(m[0],m[1],Object(a.useState)("")),C=Object(l.a)(S,2),w=(C[0],C[1],Object(a.useState)(0)),I=Object(l.a)(w,2),L=I[0],T=I[1],P=!1,N="Edit";c&&d===c[0].writerid&&(P=!0),c&&d===c[0].writerid&&L>0&&(!0,N="Update ");return Object(r.jsxs)("div",{className:"blog-details",children:[s&&Object(r.jsx)("div",{children:"Loading..."}),i&&Object(r.jsx)("div",{children:i}),c&&L>0?Object(r.jsxs)("article",{children:[Object(r.jsx)("div",{children:Object(r.jsx)("input",{placeholder:"Title",value:h||c[0].title,onChange:function(e){return O(e.target.value)}})}),Object(r.jsxs)("div",{children:[" ",Object(r.jsx)("textarea",{placeholder:"Body",value:f||c[0].body,onChange:function(e){return v(e.target.value)}})]})]}):c&&Object(r.jsxs)("article",{children:[Object(r.jsx)("h2",{children:c[0].title}),Object(r.jsx)("div",{children:c[0].body}),Object(r.jsxs)("p",{children:["Written by ",c[0].users[0].name]})]}),c&&P?Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{id:"editBtn",onClick:function(){T(L+1),console.log("in here "+L),L>=1&&(console.log("in here "+L),y()({method:"POST",data:{title:h,bodynotes:f},withCredentials:!0,url:"".concat(n.API_LINK,"/updateuser/")+e}).then((function(){o.push("/")})))},children:"".concat(N)}),Object(r.jsx)("button",{onClick:function(){y()({method:"POST",withCredentials:!0,url:"".concat(n.API_LINK,"/deleterecord/")+e}).then((function(){o.push("/")}))},children:"delete"})]}):""]})};var F=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){n(!1)}),[]),Object(r.jsx)(d.a,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(S,{children:Object(r.jsx)(R,{children:Object(r.jsx)(p,{children:Object(r.jsxs)(b.Provider,{value:[c,n],children:[Object(r.jsx)(E,{}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(K,{})}),Object(r.jsx)(j.a,{path:"/fetchsinglerequest/:id",children:Object(r.jsx)(B,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/login",children:Object(r.jsx)(T,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/Requestf",children:Object(r.jsx)(L,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/fetchSingleForEdit/:id",children:Object(r.jsx)(U,{})})]})]})})})})})})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,89)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),a(e),i(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(F,{})}),document.getElementById("root")),W()}},[[77,1,2]]]);
//# sourceMappingURL=main.b59f7df9.chunk.js.map